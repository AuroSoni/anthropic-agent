/**
 * XML Stream Examples
 * 
 * Raw SSE stream data in XML format for testing XmlStreamParser.
 * Auto-generated from xml_stream_examples.txt
 */

export const xml_example_1_raw = "data: <meta_init data=\"{&quot;format&quot;: &quot;xml&quot;, &quot;user_query&quot;: &quot;Create a docx file with a chart&quot;, &quot;message_history&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: [{&quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;Create a docx file with a chart&quot;}]}], &quot;agent_uuid&quot;: &quot;dbe25a6e-0493-4c70-9a0b-e906c03584b5&quot;, &quot;model&quot;: &quot;claude-sonnet-4-5&quot;}\"></meta_init>\n\ndata: <content-block-thinking>\n\ndata: The user wants me to create a \n\ndata: docx file with a chart. To\n\ndata:  do this, I'll\n\ndata:  need to:\n\ndata: \n\n1. Create a Python\n\ndata:  script that uses\n\ndata:  the python\n\ndata: -docx library to create a Wor\n\ndata: d document\n2. Add a chart to\n\ndata:  the document (\n\ndata: python\n\ndata: -docx supports adding\n\ndata:  charts)\n\ndata: \n3. Save the file\n\ndata:  an\n\ndata: d export\n\ndata:  it to\n\ndata:  OUTPUT\n\ndata: _DIR\n\nLet\n\ndata:  me create\n\ndata:  a Python\n\ndata:  script that does\n\ndata:  this. I'll create\n\ndata:  a simple\n\ndata:  \n\ndata: document with a chart showing\n\ndata:  some\n\ndata:  sample\n\ndata:  data.\n\ndata: </content-block-thinking>\n\ndata: <content-block-text>\n\ndata: I'll create\n\ndata:  a Wor\n\ndata: d document (\n\ndata: docx) with a chart for\n\ndata:  you. Let me write\n\ndata:  a Python script to\n\ndata:  \n\ndata: do this using\n\ndata:  the python-docx library.\n\ndata: </content-block-text>\n\ndata: <content-block-tool_call id=\"srvtoolu_01AhsGyKMBXkHzNR43LqDeMy\" name=\"text_editor_code_execution\" arguments=\"{&quot;command&quot;: &quot;create&quot;, &quot;path&quot;: &quot;/tmp/create_docx_with_chart.py&quot;, &quot;file_text&quot;: &quot;import os\\nfrom docx import Document\\nfrom docx.shared import Inches, Pt\\nfrom docx.enum.chart import XL_CHART_TYPE\\nfrom docx.chart.data import CategoryChartData\\n\\n# Create a new Document\\ndoc = Document()\\n\\n# Add a title\\ntitle = doc.add_heading(&#x27;Sales Report 2024&#x27;, 0)\\n\\n# Add a paragraph\\ndoc.add_paragraph(&#x27;This document demonstrates a chart in a Word document.&#x27;)\\ndoc.add_paragraph(&#x27;Below is a bar chart showing quarterly sales data:&#x27;)\\n\\n# Create chart data\\nchart_data = CategoryChartData()\\nchart_data.categories = [&#x27;Q1&#x27;, &#x27;Q2&#x27;, &#x27;Q3&#x27;, &#x27;Q4&#x27;]\\nchart_data.add_series(&#x27;Revenue (in thousands)&#x27;, (25, 32, 38, 45))\\nchart_data.add_series(&#x27;Expenses (in thousands)&#x27;, (18, 22, 25, 28))\\n\\n# Add a chart to the document\\nx, y, cx, cy = Inches(1), Inches(2), Inches(5), Inches(3)\\nchart = doc.add_chart(XL_CHART_TYPE.COLUMN_CLUSTERED, x, y, cx, cy, chart_data)\\n\\n# Customize chart title\\nchart.has_title = True\\nchart.chart_title.text_frame.text = &#x27;Quarterly Financial Performance&#x27;\\n\\n# Add a paragraph after the chart\\ndoc.add_paragraph()\\ndoc.add_paragraph(&#x27;Key Insights:&#x27;)\\ndoc.add_paragraph(&#x27;\\u2022 Revenue showed consistent growth throughout the year&#x27;, style=&#x27;List Bullet&#x27;)\\ndoc.add_paragraph(&#x27;\\u2022 Expenses remained well-controlled&#x27;, style=&#x27;List Bullet&#x27;)\\ndoc.add_paragraph(&#x27;\\u2022 Q4 showed the strongest performance&#x27;, style=&#x27;List Bullet&#x27;)\\n\\n# Save the document\\noutput_path = &#x27;/tmp/document_with_chart.docx&#x27;\\ndoc.save(output_path)\\n\\n# Copy to OUTPUT_DIR for export\\noutput_dir = os.environ.get(&#x27;OUTPUT_DIR&#x27;, &#x27;/tmp&#x27;)\\nfinal_path = os.path.join(output_dir, &#x27;document_with_chart.docx&#x27;)\\nimport shutil\\nshutil.copy(output_path, final_path)\\n\\nprint(f\\&quot;Document with chart created successfully!\\&quot;)\\nprint(f\\&quot;Saved to: {final_path}\\&quot;)\\n&quot;}\"></content-block-tool_call>\n\ndata: <content-block-tool_result id=\"srvtoolu_01AhsGyKMBXkHzNR43LqDeMy\" name=\"text_editor_code_execution_tool_result\"><![CDATA[\"BetaTextEditorCodeExecutionCreateResultBlock(is_file_update=False, type='text_editor_code_execution_create_result')\"]]></content-block-tool_result>\n\ndata: <content-block-tool_call id=\"srvtoolu_01LAEUah5LAUZmzywKqobaJw\" name=\"bash_code_execution\" arguments=\"{&quot;command&quot;: &quot;cd /tmp &amp;&amp; python create_docx_with_chart.py&quot;}\"></content-block-tool_call>\n\ndata: <content-block-tool_result id=\"srvtoolu_01LAEUah5LAUZmzywKqobaJw\" name=\"bash_code_execution_tool_result\"><![CDATA[\"BetaBashCodeExecutionResultBlock(content=[], return_code=1, stderr='Traceback (most recent call last):\\\\n  File \\\"/tmp/create_docx_with_chart.py\\\", line 4, in <module>\\\\n    from docx.enum.chart import XL_CHART_TYPE\\\\nModuleNotFoundError: No module named \\\\'docx.enum.chart\\\\'\\\\n', stdout='', type='bash_code_execution_result')\"]]></content-block-tool_result>\n\ndata: <content-block-text>\n\ndata: Let me check\n\ndata:  the available\n\ndata:  modules an\n\ndata: d create\n\ndata:  a simpler version:\n\ndata: </content-block-text>\n\ndata: <content-block-tool_call id=\"srvtoolu_014XN4oLmm1VWTLuEejZEajS\" name=\"bash_code_execution\" arguments=\"{&quot;command&quot;: &quot;python -c \\&quot;import docx; print(dir(docx))\\&quot; 2&gt;&amp;1 | head -20&quot;}\"></content-block-tool_call>\n\ndata: <content-block-tool_result id=\"srvtoolu_014XN4oLmm1VWTLuEejZEajS\" name=\"bash_code_execution_tool_result\"><![CDATA[\"BetaBashCodeExecutionResultBlock(content=[], return_code=0, stderr='', stdout=\\\"['Document', 'ImagePart', 'RT', 'TYPE_CHECKING', 'Type', '__all__', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__path__', '__spec__', '__version__', 'annotations', 'api', 'blkcntnr', 'dml', 'document', 'drawing', 'enum', 'exceptions', 'image', 'opc', 'oxml', 'package', 'parts', 'section', 'settings', 'shape', 'shared', 'styles', 'table', 'text']\\\\n\\\", type='bash_code_execution_result')\"]]></content-block-tool_result>\n\ndata: <content-block-tool_call id=\"srvtoolu_016KwTcoRjaQ9rGWd8NkDikG\" name=\"bash_code_execution\" arguments=\"{&quot;command&quot;: &quot;python -c \\&quot;from docx import Document; d = Document(); print(&#x27;Chart method available:&#x27;, hasattr(d, &#x27;add_chart&#x27;))\\&quot;&quot;}\"></content-block-tool_call>\n\ndata: <content-block-tool_result id=\"srvtoolu_016KwTcoRjaQ9rGWd8NkDikG\" name=\"bash_code_execution_tool_result\"><![CDATA[\"BetaBashCodeExecutionResultBlock(content=[], return_code=0, stderr='', stdout='Chart method available: False\\\\n', type='bash_code_execution_result')\"]]></content-block-tool_result>\n\ndata: <content-block-text>\n\ndata: It\n\ndata:  looks\n\ndata:  like the basic\n\ndata:  python\n\ndata: -docx library doesn\n\ndata: 't have built\n\ndata: -in chart support. Let me create\n\ndata:  a \n\ndata: document with\n\ndata:  a chart\n\ndata:  by\n\ndata:  embedding\n\ndata:  an\n\ndata:  image of\n\ndata:  a\n\ndata:  chart\n\ndata:  create\n\ndata: d with matplotlib:\n\ndata: </content-block-text>\n\ndata: <content-block-tool_call id=\"srvtoolu_019QVwKzssj94RauneKBvW7N\" name=\"text_editor_code_execution\" arguments=\"{&quot;command&quot;: &quot;create&quot;, &quot;path&quot;: &quot;/tmp/create_docx_with_chart_v2.py&quot;, &quot;file_text&quot;: &quot;import os\\nimport matplotlib.pyplot as plt\\nfrom docx import Document\\nfrom docx.shared import Inches\\n\\n# Create chart data\\ncategories = [&#x27;Q1&#x27;, &#x27;Q2&#x27;, &#x27;Q3&#x27;, &#x27;Q4&#x27;]\\nrevenue = [25, 32, 38, 45]\\nexpenses = [18, 22, 25, 28]\\n\\n# Create a bar chart using matplotlib\\nfig, ax = plt.subplots(figsize=(10, 6))\\nx = range(len(categories))\\nwidth = 0.35\\n\\nbars1 = ax.bar([i - width/2 for i in x], revenue, width, label=&#x27;Revenue&#x27;, color=&#x27;#2E86DE&#x27;)\\nbars2 = ax.bar([i + width/2 for i in x], expenses, width, label=&#x27;Expenses&#x27;, color=&#x27;#EE5A6F&#x27;)\\n\\nax.set_xlabel(&#x27;Quarter&#x27;, fontsize=12, fontweight=&#x27;bold&#x27;)\\nax.set_ylabel(&#x27;Amount (in thousands)&#x27;, fontsize=12, fontweight=&#x27;bold&#x27;)\\nax.set_title(&#x27;Quarterly Financial Performance&#x27;, fontsize=14, fontweight=&#x27;bold&#x27;, pad=20)\\nax.set_xticks(x)\\nax.set_xticklabels(categories)\\nax.legend()\\nax.grid(axis=&#x27;y&#x27;, alpha=0.3)\\n\\n# Add value labels on bars\\nfor bars in [bars1, bars2]:\\n    for bar in bars:\\n        height = bar.get_height()\\n        ax.text(bar.get_x() + bar.get_width()/2., height,\\n                f&#x27;${height}K&#x27;,\\n                ha=&#x27;center&#x27;, va=&#x27;bottom&#x27;, fontsize=9)\\n\\nplt.tight_layout()\\n\\n# Save the chart as an image\\nchart_image_path = &#x27;/tmp/chart.png&#x27;\\nplt.savefig(chart_image_path, dpi=300, bbox_inches=&#x27;tight&#x27;)\\nplt.close()\\n\\n# Create a new Word Document\\ndoc = Document()\\n\\n# Add a title\\ndoc.add_heading(&#x27;Sales Report 2024&#x27;, 0)\\n\\n# Add introduction\\ndoc.add_paragraph(&#x27;This document demonstrates a chart embedded in a Word document.&#x27;)\\ndoc.add_paragraph(&#x27;Below is a bar chart showing quarterly sales data:&#x27;)\\n\\n# Add the chart image\\ndoc.add_picture(chart_image_path, width=Inches(6))\\n\\n# Add some space\\ndoc.add_paragraph()\\n\\n# Add analysis section\\ndoc.add_heading(&#x27;Key Insights&#x27;, level=1)\\ndoc.add_paragraph(&#x27;\\u2022 Revenue showed consistent growth throughout the year&#x27;, style=&#x27;List Bullet&#x27;)\\ndoc.add_paragraph(&#x27;\\u2022 Q1 revenue was $25K, growing to $45K by Q4 (80% increase)&#x27;, style=&#x27;List Bullet&#x27;)\\ndoc.add_paragraph(&#x27;\\u2022 Expenses remained well-controlled, growing at a slower rate&#x27;, style=&#x27;List Bullet&#x27;)\\ndoc.add_paragraph(&#x27;\\u2022 Q4 showed the strongest performance with highest profit margin&#x27;, style=&#x27;List Bullet&#x27;)\\n\\n# Add summary table\\ndoc.add_heading(&#x27;Summary Table&#x27;, level=1)\\ntable = doc.add_table(rows=5, cols=3)\\ntable.style = &#x27;Light Grid Accent 1&#x27;\\n\\n# Header row\\nheader_cells = table.rows[0].cells\\nheader_cells[0].text = &#x27;Quarter&#x27;\\nheader_cells[1].text = &#x27;Revenue ($K)&#x27;\\nheader_cells[2].text = &#x27;Expenses ($K)&#x27;\\n\\n# Data rows\\nfor i, quarter in enumerate(categories):\\n    row_cells = table.rows[i + 1].cells\\n    row_cells[0].text = quarter\\n    row_cells[1].text = str(revenue[i])\\n    row_cells[2].text = str(expenses[i])\\n\\n# Save the document\\noutput_path = &#x27;/tmp/document_with_chart.docx&#x27;\\ndoc.save(output_path)\\n\\n# Copy to OUTPUT_DIR for export\\noutput_dir = os.environ.get(&#x27;OUTPUT_DIR&#x27;, &#x27;/tmp&#x27;)\\nfinal_path = os.path.join(output_dir, &#x27;document_with_chart.docx&#x27;)\\nimport shutil\\nshutil.copy(output_path, final_path)\\n\\nprint(f\\&quot;\\u2713 Document with chart created successfully!\\&quot;)\\nprint(f\\&quot;\\u2713 Chart image saved to: {chart_image_path}\\&quot;)\\nprint(f\\&quot;\\u2713 Document exported to: document_with_chart.docx\\&quot;)\\n&quot;}\"></content-block-tool_call>\n\ndata: <content-block-tool_result id=\"srvtoolu_019QVwKzssj94RauneKBvW7N\" name=\"text_editor_code_execution_tool_result\"><![CDATA[\"BetaTextEditorCodeExecutionCreateResultBlock(is_file_update=False, type='text_editor_code_execution_create_result')\"]]></content-block-tool_result>\n\ndata: <content-block-tool_call id=\"srvtoolu_01XWdYH7f2UXAHeCyG62LF8C\" name=\"bash_code_execution\" arguments=\"{&quot;command&quot;: &quot;cd /tmp &amp;&amp; python create_docx_with_chart_v2.py&quot;}\"></content-block-tool_call>\n\ndata: <content-block-tool_result id=\"srvtoolu_01XWdYH7f2UXAHeCyG62LF8C\" name=\"bash_code_execution_tool_result\"><![CDATA[\"BetaBashCodeExecutionResultBlock(content=[BetaBashCodeExecutionOutputBlock(file_id='file_011CVsVWKY9N4XdEuoaFAmJR', type='bash_code_execution_output')], return_code=0, stderr='', stdout='\\u2713 Document with chart created successfully!\\\\n\\u2713 Chart image saved to: /tmp/chart.png\\\\n\\u2713 Document exported to: document_with_chart.docx\\\\n', type='bash_code_execution_result')\"]]></content-block-tool_result>\n\ndata: <content-block-text>\n\ndata: Perfect\n\ndata: ! I've successfully created a Wor\n\ndata: d document with a chart.\n\ndata:  Here's what I include\n\ndata: d:\n\n**\n\ndata: The\n\ndata:  document contains\n\ndata: :**\n1\n\ndata: . **\n\ndata: Title:**\n\ndata:  \"Sales Report 2024\"\n\ndata: \n2. **A\n\ndata:  bar chart**\n\ndata:  showing:\n\ndata: \n   -\n\ndata:  Quarterly financial\n\ndata:  data\n\ndata:  (Q1-\n\ndata: Q4)\n   - Revenue in\n\ndata:  blue\n\ndata:  bars\n\ndata: \n   - Expenses in re\n\ndata: d bars\n   - Value\n\ndata:  labels on each\n\ndata:  bar\n   - Professional\n\ndata:  styling with grid lines\n\n3\n\ndata: . **Key Insights section**\n\ndata:  with\n\ndata:  bullet points analyzing\n\ndata:  the\n\ndata:  data\n\ndata: \n4. **Summary Table\n\ndata: ** with\n\ndata:  the\n\ndata:  raw\n\ndata:  data in\n\ndata:  a formatte\n\ndata: d table\n\ndata: \n\nThe chart shows\n\ndata:  a\n\ndata:  quarterly\n\ndata:  financial\n\ndata:  performance with revenue\n\ndata:  growing\n\ndata:  from $25K in\n\ndata:  Q1 to $45K in\n\ndata:  Q4,\n\ndata:  while\n\ndata:  expenses remain well-controlled throughout\n\ndata:  the year.\n\ndata: \n\nThe\n\ndata:  file\n\ndata:  **\n\ndata: \"\n\ndata: document_with_chart.docx\n\ndata: \"** has been create\n\ndata: d an\n\ndata: d is\n\ndata:  ready for downloa\n\ndata: d!\n\ndata: </content-block-text>\n\ndata: <content-block-meta_files><![CDATA[{\n  \"files\": [\n    {\n      \"file_id\": \"file_011CVsVWKY9N4XdEuoaFAmJR\",\n      \"filename\": \"document_with_chart.docx\",\n      \"first_seen_step\": 0,\n      \"created_at\": \"2025-12-07T18:34:26.996670\",\n      \"last_seen_step\": 0,\n      \"updated_at\": \"2025-12-07T18:34:26.996670\",\n      \"storage_location\": \"https://agent-files-bucket-3c8qbd.s3.ap-south-1.amazonaws.com/agent-files/dbe25a6e-0493-4c70-9a0b-e906c03584b5/file_011CVsVWKY9N4XdEuoaFAmJR_document_with_chart.docx\",\n      \"size\": 118226,\n      \"timestamp\": \"2025-12-07T18:34:29.156442\",\n      \"is_update\": false,\n      \"storage_backend\": \"s3\",\n      \"s3_bucket\": \"agent-files-bucket-3c8qbd\",\n      \"s3_key\": \"agent-files/dbe25a6e-0493-4c70-9a0b-e906c03584b5/file_011CVsVWKY9N4XdEuoaFAmJR_document_with_chart.docx\",\n      \"processed_at_step\": 0\n    }\n  ]\n}]]></content-block-meta_files>\n\ndata: [DONE]\n\n";

/**
 * Helper to simulate streaming by splitting into chunks.
 * Splits on "data: " boundaries to simulate SSE chunks.
 */
export function getStreamChunks(content: string = xml_example_1_raw): string[] {
  // Split on "data: " but keep the delimiter
  const parts = content.split(/(data: )/);
  const chunks: string[] = [];
  
  for (let i = 0; i < parts.length; i++) {
    if (parts[i] === 'data: ' && i + 1 < parts.length) {
      chunks.push(parts[i] + parts[i + 1]);
      i++; // Skip next part since we consumed it
    } else if (parts[i] && parts[i] !== 'data: ') {
      chunks.push(parts[i]);
    }
  }
  
  return chunks.filter(c => c.trim().length > 0);
}

/**
 * Strip "data: " prefix and join lines for XML parsing.
 * This mimics how the actual stream processor would clean the SSE format.
 */
export function cleanXmlStream(content: string = xml_example_1_raw): string {
  return content
    .split('\n')
    .map(line => {
      if (line.startsWith('data: ')) {
        return line.slice(6); // Remove "data: " prefix
      }
      return line;
    })
    .filter(line => line !== '[DONE]' && line.trim().length > 0)
    .join('');
}
